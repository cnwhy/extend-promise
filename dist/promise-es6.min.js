/*!
 * extend-promise v0.0.1
 * Homepage https://github.com/cnwhy/extend-promise#readme
 * License BSD
 */
!function e(r,n,t){function o(i,u){if(!n[i]){if(!r[i]){var c="function"==typeof require&&require;if(!u&&c)return c(i,!0);if(f)return f(i,!0);throw new Error("Cannot find module '"+i+"'")}var l=n[i]={exports:{}};r[i][0].call(l.exports,function(e){var n=r[i][1][e];return o(n?n:e)},l,l.exports,e,r,n,t)}return n[i].exports}for(var f="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}({1:[function(e,r,n){!function(e,r){if("function"==typeof define&&(define.amd||define.cmd))define([],r);else if("undefined"==typeof window&&"undefined"==typeof self)throw new Error("加载 "+e+" 模块失败！，请检查您的环境！")}("extendPromise",function(){var r="undefined"!=typeof window?window:self;if("function"!=typeof r.Promise)throw Error('需要Promise,但未找到,请尝试使用"promise-full.js"');var n=e("../src/polyfills")(r.Promise);return n})},{"../src/polyfills":4}],2:[function(e,r,n){function t(e){return null!==e&&"object"==typeof e&&!e.nodeType&&e!==e.window&&!(e.constructor&&!Object.prototype.hasOwnProperty.call(e.constructor.prototype,"isPrototypeOf"))}function o(e,r){function n(e,r){return r=+r>0?+r:0,function(n){var o,i=f.defer(),u=0,c=function(t){var c=n[t];f.resolve(c).then(function(n){!e&&r(r&&o.length<r)||(o[t]=n),(0==--u||!e&&r&&o.length>=r)&&i.resolve(o)},function(e){"undefined"==typeof r?i.reject(e):0==--u&&i.resolve(o)}),u++};if("[object Array]"===Object.prototype.toString.call(n)){o=[];for(var l=0;l<n.length;l++)c(l)}else if(e&&t(n)){o={};for(var l in n)c(l)}else i.reject(new TypeError);return i.promise}}function o(e){return function(r,n){return r?e.reject(r):void e.resolve(n)}}var f;return f=r?r:e,f.Promise||e==r||(f.Promise=e),"function"==typeof e.defer?f.defer=e.defer:"function"==typeof e.deferred?f.defer=e.deferred:f.defer=function(){var r,n,t=new e(function(e,t){r=e,n=t});return{promise:t,resolve:r,reject:n}},"function"==typeof e.delay?f.delay=e.delay:f.delay=function(e,r){var n=f.defer();return setTimeout(n.resolve,e,r),n.promise},"function"==typeof e.resolve?f.resolve=e.resolve:f.resolve=function(e){var r=f.defer();return r.resolve(e),r.promise},"function"==typeof e.reject?f.reject=e.reject:f.reject=function(e){var r=f.defer();return r.reject(e),r.promise},"function"==typeof e.all?f.all=e.all:f.all=n(),"function"==typeof e.allMap?f.allMap=e.allMap:f.allMap=n(!0),f.some=function(e,r){return n(!1,r||0)(e)},"function"==typeof e.map?f.map=e.map:f.map=function(e,r,n){function t(){if(l<a.length){var n=a[l],c=f.resolve(r(e[n],n,e)).then(function(e){return t(),e},o.reject);i.push(c),u--,l++}else f.all(i).then(o.resolve,o.reject)}var o=f.defer(),i=[],u=n?+n.concurrency:0;if(0==u||u!=u){for(var c in e)i.push(r(e[c],c,e));return f.all(i).then(o.resolve,o.reject),o.promise}var l=0,a=function(){var r=[];for(var n in e)r.push(n);return r}();do t();while(u>0&&l<a.length);return o.promise},"function"==typeof e.race?f.race=f.any=e.race:"function"==typeof e.any?f.race=f.any=e.any:f.race=f.any=function(e){for(var r=f.defer(),n=0;n<e.length;n++)+function(){var t=n,o=e[t];f.resolve(o).then(function(e){r.resolve(e)},function(e){r.reject(e)})}();return r.promise},f.nfcall=function(e){var r=this===f?null:this,n=f.defer(),t=Array.prototype.slice.call(arguments,1);return t.push(o(n)),e.apply(r,t),n.promise},f.nfapply=function(e,r){var n=this===f?null:this,t=f.defer();if("[object Array]"!==Object.prototype.toString.call(r))throw"args TypeError";return r.push(o(t)),e.apply(n,r),t.promise},f.denodeify=function(e){var r=this===f?null:this;return function(){return f.nfapply.call(r,e,Array.prototype.slice.call(arguments))}},f}r.exports=o},{}],3:[function(e,r,n){function t(e){var r=e.prototype;return r.done=function(e,r){this.then(function(r){"function"==typeof e&&setTimeout(function(){e(r)},0)},function(e){if("function"!=typeof r)throw e;setTimeout(function(){r(e)},0)})},r.spread=function(e,r){return this.then(function(r){return e.apply(null,r)},r)},r.fail=r.catch=function(e){return this.then(null,e)},Prototype.catchOf=function(e,r){return r=r||e,this.then(null,function(n){var t=typeof r;if("function"!=t)throw n;if(e===r)return r(n);if(e===n||"function"==typeof e&&n instanceof e)return r(n);throw n})},r.error=function(e){return this.catchOf(Error,e)},r.fin=r.finally=function(e){var r=function(r,n){try{e(r,n)}catch(e){}};return this.then(function(e){return r(e),e},function(e){throw r(null,e),e})},e}r.exports=t},{}],4:[function(e,r,n){r.exports=function(r){return e("../src/extendClass")(r),e("../src/extendPrototype")(r),r}},{"../src/extendClass":2,"../src/extendPrototype":3}]},{},[1]);