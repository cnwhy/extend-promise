/*!
 * extend-promise v0.0.2
 * Homepage https://github.com/cnwhy/extend-promise#readme
 * License BSD
 */
!function e(t,n,r){function o(f,u){if(!n[f]){if(!t[f]){var c="function"==typeof require&&require;if(!u&&c)return c(f,!0);if(i)return i(f,!0);throw new Error("Cannot find module '"+f+"'")}var s=n[f]={exports:{}};t[f][0].call(s.exports,function(e){var n=t[f][1][e];return o(n?n:e)},s,s.exports,e,t,n,r)}return n[f].exports}for(var i="function"==typeof require&&require,f=0;f<r.length;f++)o(r[f]);return o}({1:[function(e,t,n){!function(e,t){if("function"==typeof define&&(define.amd||define.cmd))define([],t);else{if("undefined"==typeof window&&"undefined"==typeof self)throw new Error("加载 "+e+" 模块失败！，请检查您的环境！");var n="undefined"!=typeof window?window:self;n[e]=t()}}("Promise",function(){var t=e("../promise/setTimeout");return t})},{"../promise/setTimeout":4}],2:[function(e,t,n){t.exports=e("./src")(function(e){setTimeout(e,0)})},{"./src":3}],3:[function(e,t,n){"use strict";t.exports=function(e){function t(e,r){if(r instanceof n&&r.then(e.resolve,e.reject),!r||"function"!=typeof r&&"object"!=typeof r)e.resolve(r);else{var o,i=!1;try{o=r.then,"function"==typeof o?o.call(r,function(n){i||(i=!0,t(e,n))},function(t){i||(i=!0,e.reject(t))}):e.resolve(r)}catch(t){i||(i=!0,e.reject(t))}}}function n(e){function n(e){r.call(i,1,e)}function o(e){r.call(i,0,e)}var i=this;this.status=-1,this._events=[];var f=!1;if(this.resolve=function(e){if(!f)return f=!0,i===e?o(new TypeError("The promise and its value refer to the same object")):void t({resolve:n,reject:o},e)},this.reject=function(e){f||(f=!0,o(e))},"function"==typeof e)try{e(this.resolve,this.reject)}catch(e){this.reject(e)}}function r(t,n){var r=this;~this.status||(this.status=t,t?this.value=n:this.reason=n,e(function(){o.call(r)}))}function o(){if(~this.status)for(var e=this,t=e._events,n=e.status?e.value:e.reason,r=e.status?0:1;t.length;)!function(t){var o=t[r],f=t[2];i(o,n,f,e.status)}(t.shift())}function i(t,n,r,o){var i,f;r&&(i=r.resolve,f=r.reject),"function"==typeof t?e(function(){var e;try{e=t(n)}catch(e){if(!f)throw e;return void f(e)}i&&i(e)}):r&&(o?i(n):f(n))}return n.defer=function(){var e,t,r=new n(function(n,r){e=n,t=r});return{promise:r,resolve:e,reject:t}},n.resolve=function(e){return e instanceof n?e:new n(function(t,n){t(e)})},n.reject=function(e){return new n(function(t,n){n(e)})},n.prototype.then=function(e,t){var r=(this.status,n.defer()),i=r.promise;return this._events.push([e,t,i]),o.call(this),i},n}},{}],4:[function(e,t,n){var r=e("easy-promise/setTimeout");t.exports=e("../src/polyfills")(r)},{"../src/polyfills":7,"easy-promise/setTimeout":2}],5:[function(e,t,n){function r(e){return null!==e&&"object"==typeof e&&!e.nodeType&&e!==e.window&&!(e.constructor&&!Object.prototype.hasOwnProperty.call(e.constructor.prototype,"isPrototypeOf"))}function o(e,t){function n(e,t){return t=+t>0?+t:0,function(n){var o,f=i.defer(),u=0,c=function(r){var c=n[r];i.resolve(c).then(function(n){!e&&t(t&&o.length<t)||(o[r]=n),(0==--u||!e&&t&&o.length>=t)&&f.resolve(o)},function(e){"undefined"==typeof t?f.reject(e):0==--u&&f.resolve(o)}),u++};if("[object Array]"===Object.prototype.toString.call(n)){o=[];for(var s=0;s<n.length;s++)c(s)}else if(e&&r(n)){o={};for(var s in n)c(s)}else f.reject(new TypeError);return f.promise}}function o(e){return function(t,n){return t?e.reject(t):void e.resolve(n)}}var i;return i=t?t:e,i.Promise||e==t||(i.Promise=e),"function"==typeof e.defer?i.defer=e.defer:"function"==typeof e.deferred?i.defer=e.deferred:i.defer=function(){var t,n,r=new e(function(e,r){t=e,n=r});return{promise:r,resolve:t,reject:n}},"function"==typeof e.delay?i.delay=e.delay:i.delay=function(e,t){var n=i.defer();return setTimeout(n.resolve,e,t),n.promise},"function"==typeof e.resolve?i.resolve=e.resolve:i.resolve=function(e){var t=i.defer();return t.resolve(e),t.promise},"function"==typeof e.reject?i.reject=e.reject:i.reject=function(e){var t=i.defer();return t.reject(e),t.promise},"function"==typeof e.all?i.all=e.all:i.all=n(),"function"==typeof e.allMap?i.allMap=e.allMap:i.allMap=n(!0),i.some=function(e,t){return n(!1,t||0)(e)},"function"==typeof e.map?i.map=e.map:i.map=function(e,t,n){function r(){if(s<a.length){var n=a[s],c=i.resolve(t(e[n],n,e)).then(function(e){return r(),e},o.reject);f.push(c),u--,s++}else i.all(f).then(o.resolve,o.reject)}var o=i.defer(),f=[],u=n?+n.concurrency:0;if(0==u||u!=u){for(var c in e)f.push(t(e[c],c,e));return i.all(f).then(o.resolve,o.reject),o.promise}var s=0,a=function(){var t=[];for(var n in e)t.push(n);return t}();do r();while(u>0&&s<a.length);return o.promise},"function"==typeof e.race?i.race=i.any=e.race:"function"==typeof e.any?i.race=i.any=e.any:i.race=i.any=function(e){for(var t=i.defer(),n=0;n<e.length;n++)+function(){var r=n,o=e[r];i.resolve(o).then(function(e){t.resolve(e)},function(e){t.reject(e)})}();return t.promise},i.nfcall=function(e){var t=this===i?null:this,n=i.defer(),r=Array.prototype.slice.call(arguments,1);return r.push(o(n)),e.apply(t,r),n.promise},i.nfapply=function(e,t){var n=this===i?null:this,r=i.defer();if("[object Array]"!==Object.prototype.toString.call(t))throw"args TypeError";return t.push(o(r)),e.apply(n,t),r.promise},i.denodeify=function(e){var t=this===i?null:this;return function(){return i.nfapply.call(t,e,Array.prototype.slice.call(arguments))}},i}t.exports=o},{}],6:[function(e,t,n){function r(e){var t=e.prototype;return t.done=function(e,t){this.then(function(t){"function"==typeof e&&setTimeout(function(){e(t)},0)},function(e){if("function"!=typeof t)throw e;setTimeout(function(){t(e)},0)})},t.spread=function(e,t){return this.then(function(t){return e.apply(null,t)},t)},t.fail=t.catch=function(e){return this.then(null,e)},Prototype.catchOf=function(e,t){return t=t||e,this.then(null,function(n){var r=typeof t;if("function"!=r)throw n;if(e===t)return t(n);if(e===n||"function"==typeof e&&n instanceof e)return t(n);throw n})},t.error=function(e){return this.catchOf(Error,e)},t.fin=t.finally=function(e){var t=function(t,n){try{e(t,n)}catch(e){}};return this.then(function(e){return t(e),e},function(e){throw t(null,e),e})},e}t.exports=r},{}],7:[function(e,t,n){t.exports=function(t){return e("../src/extendClass")(t),e("../src/extendPrototype")(t),t}},{"../src/extendClass":5,"../src/extendPrototype":6}]},{},[1]);