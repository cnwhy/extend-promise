/*!
 * extend-promise v0.0.2
 * Homepage https://github.com/cnwhy/extend-promise#readme
 * License BSD
 */
!function e(n,r,t){function o(i,u){if(!r[i]){if(!n[i]){var c="function"==typeof require&&require;if(!u&&c)return c(i,!0);if(f)return f(i,!0);throw new Error("Cannot find module '"+i+"'")}var l=r[i]={exports:{}};n[i][0].call(l.exports,function(e){var r=n[i][1][e];return o(r?r:e)},l,l.exports,e,n,r,t)}return r[i].exports}for(var f="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}({1:[function(e,n,r){!function(e,n){if("function"==typeof define&&(define.amd||define.cmd))define([],n);else{if("undefined"==typeof window&&"undefined"==typeof self)throw new Error("加载 "+e+" 模块失败！，请检查您的环境！");var r="undefined"!=typeof window?window:self;r[e]=n(),"function"==typeof r.Promise&&r[e].auto(r.Promise)}}("extendPromise",function(){var n=e("../index");return n.auto=function(e){n.extendClass(e),n.extendPrototype(e)},n})},{"../index":2}],2:[function(e,n,r){n.exports={extendClass:e("./src/extendClass"),extendPrototype:e("./src/extendPrototype")}},{"./src/extendClass":3,"./src/extendPrototype":4}],3:[function(e,n,r){function t(e){return null!==e&&"object"==typeof e&&!e.nodeType&&e!==e.window&&!(e.constructor&&!Object.prototype.hasOwnProperty.call(e.constructor.prototype,"isPrototypeOf"))}function o(e,n){function r(e,n){return n=+n>0?+n:0,function(r){var o,i=f.defer(),u=0,c=function(t){var c=r[t];f.resolve(c).then(function(r){!e&&n(n&&o.length<n)||(o[t]=r),(0==--u||!e&&n&&o.length>=n)&&i.resolve(o)},function(e){"undefined"==typeof n?i.reject(e):0==--u&&i.resolve(o)}),u++};if("[object Array]"===Object.prototype.toString.call(r)){o=[];for(var l=0;l<r.length;l++)c(l)}else if(e&&t(r)){o={};for(var l in r)c(l)}else i.reject(new TypeError);return i.promise}}function o(e){return function(n,r){return n?e.reject(n):void e.resolve(r)}}var f;return f=n?n:e,f.Promise||e==n||(f.Promise=e),"function"==typeof e.defer?f.defer=e.defer:"function"==typeof e.deferred?f.defer=e.deferred:f.defer=function(){var n,r,t=new e(function(e,t){n=e,r=t});return{promise:t,resolve:n,reject:r}},"function"==typeof e.delay?f.delay=e.delay:f.delay=function(e,n){var r=f.defer();return setTimeout(r.resolve,e,n),r.promise},"function"==typeof e.resolve?f.resolve=e.resolve:f.resolve=function(e){var n=f.defer();return n.resolve(e),n.promise},"function"==typeof e.reject?f.reject=e.reject:f.reject=function(e){var n=f.defer();return n.reject(e),n.promise},"function"==typeof e.all?f.all=e.all:f.all=r(),"function"==typeof e.allMap?f.allMap=e.allMap:f.allMap=r(!0),f.some=function(e,n){return r(!1,n||0)(e)},"function"==typeof e.map?f.map=e.map:f.map=function(e,n,r){function t(){if(l<a.length){var r=a[l],c=f.resolve(n(e[r],r,e)).then(function(e){return t(),e},o.reject);i.push(c),u--,l++}else f.all(i).then(o.resolve,o.reject)}var o=f.defer(),i=[],u=r?+r.concurrency:0;if(0==u||u!=u){for(var c in e)i.push(n(e[c],c,e));return f.all(i).then(o.resolve,o.reject),o.promise}var l=0,a=function(){var n=[];for(var r in e)n.push(r);return n}();do t();while(u>0&&l<a.length);return o.promise},"function"==typeof e.race?f.race=f.any=e.race:"function"==typeof e.any?f.race=f.any=e.any:f.race=f.any=function(e){for(var n=f.defer(),r=0;r<e.length;r++)+function(){var t=r,o=e[t];f.resolve(o).then(function(e){n.resolve(e)},function(e){n.reject(e)})}();return n.promise},f.nfcall=function(e){var n=this===f?null:this,r=f.defer(),t=Array.prototype.slice.call(arguments,1);return t.push(o(r)),e.apply(n,t),r.promise},f.nfapply=function(e,n){var r=this===f?null:this,t=f.defer();if("[object Array]"!==Object.prototype.toString.call(n))throw"args TypeError";return n.push(o(t)),e.apply(r,n),t.promise},f.denodeify=function(e){var n=this===f?null:this;return function(){return f.nfapply.call(n,e,Array.prototype.slice.call(arguments))}},f}n.exports=o},{}],4:[function(e,n,r){function t(e){var n=e.prototype;return n.done=function(e,n){this.then(function(n){"function"==typeof e&&setTimeout(function(){e(n)},0)},function(e){if("function"!=typeof n)throw e;setTimeout(function(){n(e)},0)})},n.spread=function(e,n){return this.then(function(n){return e.apply(null,n)},n)},n.fail=n.catch=function(e){return this.then(null,e)},Prototype.catchOf=function(e,n){return n=n||e,this.then(null,function(r){var t=typeof n;if("function"!=t)throw r;if(e===n)return n(r);if(e===r||"function"==typeof e&&r instanceof e)return n(r);throw r})},n.error=function(e){return this.catchOf(Error,e)},n.fin=n.finally=function(e){var n=function(n,r){try{e(n,r)}catch(e){}};return this.then(function(e){return n(e),e},function(e){throw n(null,e),e})},e}n.exports=t},{}]},{},[1]);